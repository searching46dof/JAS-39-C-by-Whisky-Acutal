
local use_ed_wpn = true

local function clsid_gb6_cb(use_ed)
    if use_ed then
        return "weapons.missiles.GB-6"
    else
        return "weapons.missiles.GB-6"
    end
end

local function clsid_gb6_sfw(use_ed)
    if use_ed then
        return "weapons.missiles.GB-6-SFW"
    else
        return "weapons.missiles.GB-6-SFW"
    end
end

local function clsid_gb6_he(use_ed)
    if use_ed then
        return "weapons.missiles.GB-6-HE"
    else
        return "weapons.missiles.GB-6-HE"
    end
end

local gb6_name     = "GB-6"
local gb6_name_cb  = gb6_name
local gb6_name_sfw = gb6_name .. '-SFW'
local gb6_name_he  = gb6_name .. '-HE'
local gb6_mass     = 620
local gb6_model    = "gb6"
local gb6_mbody    = "gb6-body"
local gb6_mcap     = "gb6-cap"
local pylon_mass   = 52.0

local JS_6_warhead = 
{
    mass                    = 2.5,
    caliber                 = 63,
    expl_mass               = 1.5,
    piercing_mass           = 0.0,
    other_factors           = { 1.0, 1.0, 1.0 },
    concrete_factors        = { 1.0, 1.0, 1.0 },
    concrete_obj_factor     = 0.0,
    obj_factors             = { 1.0, 1.0 },
    cumulative_factor       = 3.0,
    cumulative_thickness    = 0.65
}
    
local GB6HE_warhead = 
{
    mass                 = 500, 
    caliber              = 377,
    expl_mass            = 500,
    piercing_mass        = 0.0,
    other_factors        = { 1.0, 1.0, 1.0 },
    concrete_factors     = { 3.0, 1.0, 1.0 },
    concrete_obj_factor  = 2.0,
    obj_factors          = { 3.0, 1.0 },
    cumulative_factor    = 3.0,
    cumulative_thickness = 0.0,
}

GB6 =
{
    category        = CAT_MISSILES,
    name            = gb6_name,
    user_name       = _(gb6_name),
    scheme          = "JSOW_AB",
    class_name      = "wAmmunitionCruise",
    model           = gb6_model,
    mass            = gb6_mass,
        
    wsTypeOfWeapon  = {wsType_Weapon,wsType_Missile,wsType_AS_Missile,WSTYPE_PLACEHOLDER},

    Escort          = 0,
    Head_Type       = 5,
    sigma           = {20, 20, 20},
    M               = gb6_mass,
    H_max           = 28000.0,
    H_min           = 100,
    Diam            = 330.0,
    Cx_pil          = 10,
    D_max           = 126000.0,
    D_min           = 10000.0,
    Head_Form       = 1,
    Life_Time       = 9999,
    Nr_max          = 10,
    v_min           = 10.0,
    v_mid           = 200.0,
    Mach_max        = 1.7,
    t_b             = 0.0,
    t_acc           = 0.0,
    t_marsh         = 0.0,
    Range_max       = 140000.0,
    H_min_t         = 0.0,
    Fi_start        = 3.14152,
    Fi_rak          = 3.14152,
    Fi_excort       = 3.14152,
    Fi_search       = 99.9,
    OmViz_max       = 99.9,
    X_back          = 0.0,
    Y_back          = 0.0,
    Z_back          = 0.0,
    Reflection      = 0.1,
    KillDistance    = 0.0,
    
    LaunchDistData =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      15600,  18800,  22600,  25000,  26600,  27700,  28600,  
        500,    0,      0,      10000,  17200,  20000,  23800,  26200,  27800,  28900,  29900,  
        700,    0,      0,      12000,  18800,  21200,  25000,  27400,  29000,  30200,  31300,  
        1000,   0,      0,      14000,  21000,  26800,  26800,  29200,  31000,  32000,  33200,  
        2000,   10800,  15800,  21200,  27600,  32800,  32800,  35600,  37400,  38600,  39800,  
        3000,   18400,  23400,  28600,  34000,  38800,  38800,  41800,  43600,  45000,  46200,  
        4000,   25500,  30000,  35500,  40000,  44500,  44500,  47500,  49500,  50500,  52000,  
        5000,   32000,  37500,  42000,  47000,  50500,  50500,  53500,  55500,  57000,  58500,  
        6000,   39000,  44000,  49000,  54000,  58500,  59000,  59000,  61500,  63000,  65000,  
        7000,   45500,  50500,  56000,  60500,  64500,  64500,  64500,  67000,  69000,  71000,  
        8000,   51750,  57000,  62250,  66750,  69750,  69750,  69750,  72750,  75000,  77250,  
        9000,   57000,  59250,  69000,  73500,  75000,  75000,  75000,  78750,  81000,  83250,  
        10000,  61500,  64500,  68250,  70500,  79500,  79500,  81000,  82500,  87000,  90000,  
        11000,  72750,  77250,  81000,  84750,  86250,  87750,  87750,  89250,  92250,  95250,  
        12000,  79000,  83000,  87000,  90000,  91000,  93000,  94000,  95000,  97000,  100000, 
        13000,  86000,  90000,  93000,  96000,  97000,  99000,  99000,  100000, 100000, 105000, 
        14000,  91000,  95000,  99000,  102000, 103000, 105000, 105000, 106000, 106000, 108000, 
        15000,  97000,  101000, 105000, 107000, 109000, 111000, 111000, 112000, 112000, 113000, 
    },

    MinLaunchDistData =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      9000,   9300,   9500,   9700,   9800,   9900,   9900,   
        500,    0,      0,      8600,   9200,   9300,   9600,   9800,   9900,   10000,  10000,  
        700,    0,      0,      8800,   9300,   9400,   9700,   10000,  10300,  10800,  10800,  
        1000,   0,      0,      8800,   9400,   9800,   10400,  11600,  12000,  12000,  12400,  
        2000,   8600,   9000,   9400,   9800,   10200,  10200,  12400,  12800,  13400,  15000,  
        3000,   9200,   9600,   9800,   10200,  10600,  10600,  13600,  14000,  14000,  14000,  
        4000,   10000,  10000,  10500,  11000,  11000,  11000,  11500,  13000,  11500,  12000,  
        5000,   10500,  10500,  11000,  11500,  11500,  11500,  12000,  12000,  12000,  12000,  
        6000,   11000,  11000,  12000,  12000,  12000,  12000,  12000,  12500,  12500,  12500,  
        7000,   12000,  13500,  14000,  13500,  12500,  12500,  12500,  13500,  13000,  13000,  
        8000,   14250,  15000,  15000,  15000,  12750,  12750,  12750,  15000,  15000,  14250,  
        9000,   15000,  15750,  15750,  15000,  14250,  13500,  13500,  17250,  18000,  15750,  
        10000,  15000,  15000,  15750,  15000,  14250,  13500,  18000,  18750,  19500,  18750,  
        11000,  15750,  16500,  15750,  15000,  15000,  18000,  19500,  20250,  21750,  21000,  
        12000,  16000,  16000,  16000,  16000,  15000,  20000,  21000,  22000,  23000,  23000,  
        13000,  17000,  17000,  16000,  20000,  21000,  22000,  23000,  24000,  24000,  25000,  
        14000,  17000,  17000,  21000,  22000,  23000,  25000,  25000,  26000,  26000,  27000,  
        15000,  17000,  22000,  24000,  25000,  26000,  26000,  27000,  28000,  28000,  29000,  
    },

    MaxTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      105.2,  103.5,  113.3,  118.4,  121.5,  123.1,  123.6,  
        500,    0,      0,      71.7,   115.3,  109.8,  119.2,  124,    127,    128.5,  129.8,  
        700,    0,      0,      88.4,   124.8,  115.7,  124.9,  129.6,  132.7,  135,    137.2,  
        1000,   0,      0,      99.1,   136.3,  173.6,  133.8,  138.2,  142.9,  143,    145.9,  
        2000,   95.5,   120.8,  138.5,  166.6,  203.4,  159,    166.5,  170.6,  171.9,  173.8,  
        3000,   145,    167.8,  179.1,  195.9,  205.5,  187,    195.3,  198.8,  201.2,  202,    
        4000,   181.7,  201.3,  213.1,  219.8,  227.7,  212.5,  219.8,  224.3,  222.4,  224.7,  
        5000,   210.2,  243.1,  242,    252.2,  250.8,  239.3,  246.9,  250.4,  251.7,  252.7,  
        6000,   267.7,  273.9,  274.7,  283.1,  289.9,  273.5,  269.2,  275.9,  276,    279.7,  
        7000,   300.4,  313,    306.6,  308.5,  309.4,  292.3,  291.3,  296.9,  299.9,  301.9,  
        8000,   329.1,  342.5,  330.6,  330.1,  323.7,  307.7,  311.4,  320,    323.5,  325.7,  
        9000,   383,    424.3,  359,    356.2,  339.1,  325.4,  332.1,  345.5,  347.2,  347.4,  
        10000,  322.1,  319.4,  319.8,  314.2,  359.7,  350.1,  356.2,  356.3,  371.4,  375.4,  
        11000,  390.2,  395.9,  390.4,  392.5,  388.2,  390.4,  383.5,  386.8,  390.6,  392.3,  
        12000,  412.6,  412.8,  411.8,  410.3,  402.5,  408.4,  409.5,  411.7,  409.7,  408.9,  
        13000,  442.2,  442.9,  435.7,  435.6,  427.4,  432.8,  425.5,  427.4,  420.6,  433.8,  
        14000,  454.3,  457.6,  461.7,  462.2,  453.1,  457.8,  450.3,  452,    444.2,  447.6,  
        15000,  480.1,  484.6,  489.7,  481,    479.7,  483.6,  476.2,  477.6,  468.9,  467,    
    },

    MinTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      44.6,   36.8,   33.7,   31.7,   30.1,   29.9,   27.5,       
        500,    0,      0,      58.5,   44.2,   35.5,   32.7,   31.2,   29.8,   30,     28,     
        700,    0,      0,      55.7,   43.3,   35,     32.4,   31.9,   30.9,   31,     29.4,       
        1000,   0,      0,      51.7,   43.5,   38,     34.8,   36.6,   35.8,   34,     34.1,       
        2000,   69.6,   57.3,   47.9,   42.8,   38.2,   33.7,   38.5,   38,     38.2,   41.7,       
        3000,   63.8,   56.1,   48,     43.2,   39.6,   34.9,   42.2,   41.6,   39.9,   38.2,       
        4000,   64.2,   56.1,   50.2,   45,     40.4,   35.7,   36,     39.2,   34.1,   33.9,       
        5000,   63.1,   56.2,   50.9,   45.1,   40.8,   37.2,   37.1,   36.2,   35.4,   34.1,       
        6000,   63.6,   57.4,   54.3,   46.6,   42.8,   40.5,   38,     38.2,   37.6,   36.3,       
        7000,   70.4,   66.6,   60.9,   51.7,   45.2,   42.9,   40.5,   41.7,   39.5,   38.6,       
        8000,   79.5,   71.1,   64.2,   58.1,   47,     44.9,   42.6,   46.3,   45,     42.3,       
        9000,   80.7,   73,     66.9,   59,     52.2,   48.1,   46.2,   53.8,   52.9,   46.6,       
        10000,  74.9,   69.9,   67.2,   60.1,   52.7,   48.9,   58.8,   59,     57.1,   53.6,       
        11000,  75.8,   71.9,   64.5,   58.7,   56.3,   61.5,   63.8,   64,     63,     59.1,       
        12000,  77,     71,     66.3,   62.7,   57.5,   67.9,   68.7,   69.5,   69.6,   63.8,       
        13000,  80.7,   74.9,   67.7,   74.3,   73.9,   74.1,   74.8,   75.5,   73.1,   68.4,       
        14000,  81.5,   76,     82.1,   80.6,   80.1,   83,     80.7,   81.2,   78.6,   78,     
        15000,  82.5,   91,     91.4,   89.7,   89,     86.2,   86.4,   86.7,   83.9,   83.1,       
    },

    MidTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      71.9,   64.1,   64,     64,     63.6,   63.1,   62.2,       
        500,    0,      0,      64.9,   75.4,   65.8,   66.1,   66.1,   65.7,   65.2,   64.5,       
        700,    0,      0,      72,     78.4,   67.8,   68.3,   68.1,   68.4,   69.1,   68.4,       
        1000,   0,      0,      72.4,   81.9,   91.8,   72.4,   74.9,   75.8,   74.6,   75.1,       
        2000,   82.7,   85.6,   86.3,   92.4,   103.8,  82.2,   88.2,   88.9,   89.5,   92.6,       
        3000,   100.5,  103.4,  101.5,  103.6,  104.7,  93.8,   102,    102.4,  101.7,  100.6,  
        4000,   116,    116.7,  115.8,  114.5,  113.5,  104.4,  106.2,  109.7,  104.6,  104.5,  
        5000,   127.4,  132.8,  127.5,  127,    123.1,  115.7,  117.9,  117.2,  116.2,  115,    
        6000,   139.8,  145.1,  141.7,  138.9,  137.6,  132.5,  126.6,  128.7,  128.5,  128.4,  
        7000,   175.4,  163.7,  157.9,  151.5,  147.1,  141.6,  136.8,  139.7,  138.6,  138.1,  
        8000,   193.5,  246.8,  168.7,  162.6,  154.8,  149.8,  145.8,  152.3,  152.5,  150.4,  
        9000,   192,    273.7,  179.9,  172.4,  165.4,  158.9,  155.7,  166.9,  168.5,  162.3,  
        10000,  174.7,  169.8,  166.7,  159.7,  170.6,  164.9,  174.6,  174.8,  180.5,  179,    
        11000,  199,    196.9,  189.9,  186.2,  183.2,  188.6,  188.4,  189.3,  192.2,  190.2,  
        12000,  206.4,  202.6,  199,    195.9,  189.7,  200.1,  200.9,  201.9,  200.4,  199.3,  
        13000,  218.1,  215.2,  207.9,  213.7,  211.4,  213.1,  211.5,  212.3,  208.1,  208.7,  
        14000,  223.6,  221.5,  227.8,  227,    224.5,  227.9,  224,    224.5,  220.1,  219.2,  
        15000,  231.9,  241.2,  243.4,  240.3,  239.6,  238.4,  236.4,  236.6,  231.8,  230.2,  
    },
    
    shape_table_data =
    {
        {
            name     = gb6_name,
            file     = gb6_model,
            life     = 1,
            fire     = {0, 1},
            username = gb6_name,
            index    = WSTYPE_PLACEHOLDER,
        },
    },
    
    warhead = simple_warhead(0),

    fm = {
        mass                = gb6_mass,
        caliber             = 0.3,
        cx_coeff            = {1, 0.8, 0.8, 0.15, 1.5},
        L                   = 4.5,
        I                   = 1 / 12 * gb6_mass * 4.5 * 4.5,
        Ma                  = 2,
        Mw                  = 7,
        wind_sigma          = 0.0,
        wind_time           = 0.0,
        Sw                  = 1.2,
        dCydA               = {0.07, 0.036},
        A                   = 0.15,
        maxAoa              = 0.4,
        finsTau             = 0.2,
        Ma_x                = 2,
        Ma_z                = 2,
        Mw_x                = 1.4,
        
        addDeplSw           = 0.6,
        no_wings_A_mlt      = 2,
        wingsDeplProcTime   = 5,
        wingsDeplDelay      = 9999,
        no_wings_cx_coeff   = {1, 0.5, 0.8, 0.10, 1.6},
        
        release_rnd         = 0.3,
        release_rnd_x       = 0.0,
    },
    
    seeker = {
        coalition                       = 2,
        coalition_rnd_coeff             = 5.0,
        can_update_target_pos           = 1,
        target_point_always_on_surface  = 0,
    },
    
    control_block = {
        seeker_activation_dist       = 7000,
        default_cruise_height        = -1,
        obj_sensor                   = 0,
        can_update_target_pos        = 0,
        turn_before_point_reach      = 1,
        turn_hor_N                   = 2.2,
        turn_max_calc_angle_deg      = 90,
        turn_point_trigger_dist      = 100,
    },
    
    control_block2 = {
        delay                            = 0.5,
        add_y                            = 500,
        wind_k                           = 0.0,
        use_snake_maneuver               = 1,
        max_no_vert_offset_open_h        = 90,
        vert_offset_before_end_game_k    = 0.8,
        can_update_target_pos            = 0,
    },

    open_trigger = {
        delay                           = 0.1,
        trigger_add_time                = 1,
        bomblet_char_time               = 23.9,
        chute_bomblet_char_time         = 70.1,
        chute_open_time                 = 2.6,
        chute_cut_time                  = 400,
        char_time_vel_correction_coeff  = -0.0132,
        char_time_h_correction_coeff    = 0.0,
        default_add_y                   = 500,
        out_w_add_y                     = 0,
        wind_correction_coeff           = 1,
        time_coeff_data                 = { 25,       0.9,
                                            18,       0.86,
                                            15,       0.8,
                                            11.7,     0.58,
                                            6.8,      0.3,
                                            3,        0.2, },
    },
    
    autopilot = {
        delay                       = 0.5,
        K                           = 200,
        Ki                          = 0.00005,
        Kg                          = 6,
        nw_K                        = 32,
        nw_Ki                       = 0.00012,
        nw_Kg                       = 1.8,
        finsLimit                   = 0.8,
        useJumpByDefault            = 0,
        J_Power_K                   = 4.8,
        J_Diff_K                    = 3.2,
        J_Int_K                     = 0.0,
        J_Angle_W                   = 0.1,
        hKp_err                     = 50,
        Kx                          = 0.014,
        Kxd                         = 0.0,
        K_err_mlt                   = 5.0,
        K_roll_diff_mlt             = 5.0,
        roll_limit                  = 1.3,
        w_limit                     = 1.3,
        fins_limit_x                = 0.25,
        egm_Angle_K                 = 0.25,
        egm_FinAngle_K              = 0.32,
        egm_add_power_K             = 0.2,
        wings_depl_fins_limit_K     = 0.3,
        err_new_wlos_k              = 1.0,
        err_aoaz_k                  = 0.0,
        err_aoaz_sign_k             = 0.0,

        alternative_roll_params     = 1,
        w_x_limit                   = 1,
        err_limit                   = 0.5,
        err_min                     = 0.04,
        corr_err_min                = 0.006,
        roll_limit                  = 1.3,
        fins_limit_x                = 0.01,
        K_err_mlt                   = 4.0,
        K_roll_diff_mlt             = 4.0,
        Kx                          = 0.04,
        
        alternative_jump_params     = 1,
        K_pitch_diff_mlt            = 5.0,
        w_limit                     = 0.5,
        Kpj                         = 0.5,
    },

    launcher =
    {
        cluster = cluster_desc("Bomb_Other", wsType_Bomb_Cluster,
        {
            scheme = 
            {
                dispenser = 
                {
                    mass                    = gb6_mass,
                    caliber                 = 0.55,
                    L                       = 3.5,
                    I                       = 270.0,
                    Ma                      = 1,
                    Mw                      = 3,
                    cx_coeff                = {1, 0.3, 0.65, 0.018, 1.6},
                    model_name              = gb6_model,
                    set_start_args          = {},
                    spawn_time              = {0},
                    spawn_weight_loss       = {300},
                    spawn_args_change       = {},
                    op_spawns               = 2,
                    use_effects             = 0,
                    hide_effect_0           = 0,
                },
                
                bomblets =
                {
                    wind_sigma                  = 25,
                    impulse_sigma               = 2,
                    moment_sigma                = 0.1,
                    count                       = 150,
                    effect_count                = 60,
                    mass                        = 2.5,
                    caliber                     = 0.06,
                    cx_coeff                    = {1.0, 0.4, 0.4, 0.25, 1.35},
                    L                           = 0.308,
                    I                           = 1/12 * 2.8 * 0.308 ^ 2,
                    Ma                          = 0.2,
                    Mw                          = 0.8,
                    model_name                  = "BLU_97B",
                    connectors_model_name       = "RBK_250_PTAB_25M_tail",
                    explosion_impulse_coeff     = 15,
                    explosion_dont_use_x_axis   = 0,
                    release_rnd_coeff           = 0.8,
                    chute_open_time             = 2.6,
                    chute_cut_time              = 500.0,
                    chute_diam                  = 0.3,
                    chute_Cx                    = 0.7,
                    chute_rnd_coeff             = 0.5,
                    explosion_center            = {{0,0.3,0}},
                    spawn_options               = {{0,0,150}},
                },
                warhead = JS_6_warhead,
            },
            
            name            = _("JS-06"),
            type_name       = _("cluster"),
            cluster_scheme  = "disp_bomblets",
        }
        )
    },
    
}

if not use_ed_wpn then
    declare_weapon(GB6)
end

declare_loadout({
    category        = CAT_BOMBS,
    CLSID           = 'DIS_GB6',
    --attribute       = GB6.wsTypeOfWeapon,
    attribute       = clsid_gb6_cb(use_ed_wpn),
    Count           = 1,
    Cx_pil          = 0.0024,
    Picture         = "gb6.png",
    displayName     = _(gb6_name),
    Weight          = GB6.mass + pylon_mass,
    Elements        = {{ShapeName = gb6_model}},
    ejectVelocity   = eject_speed_msl,
    ejectDirection  = {0, -1, 0},
})




--------------------------------
GB6_TSP =
{
    category        = CAT_MISSILES,
    name            = gb6_name_sfw,
    user_name       = _(gb6_name_sfw),
    scheme          = "JSOW_AB",
    class_name      = "wAmmunitionCruise",
    model           = gb6_model,
    mass            = gb6_mass,
    
    wsTypeOfWeapon  = {wsType_Weapon,wsType_Missile,wsType_AS_Missile,WSTYPE_PLACEHOLDER},

    Escort          = 0,
    Head_Type       = 5,
    sigma           = {20, 20, 20},
    M               = gb6_mass,
    H_max           = 28000.0,
    H_min           = 100,
    Diam            = 330.0,
    Cx_pil          = 10,
    D_max           = 126000.0,
    D_min           = 10000.0,
    Head_Form       = 1,
    Life_Time       = 9999,
    Nr_max          = 10,
    v_min           = 10.0,
    v_mid           = 200.0,
    Mach_max        = 1.7,
    t_b             = 0.0,
    t_acc           = 0.0,
    t_marsh         = 0.0,
    Range_max       = 140000.0,
    H_min_t         = 0.0,
    Fi_start        = 3.14152,
    Fi_rak          = 3.14152,
    Fi_excort       = 3.14152,
    Fi_search       = 99.9,
    OmViz_max       = 99.9,
    X_back          = 0.0,
    Y_back          = 0.0,
    Z_back          = 0.0,
    Reflection      = 0.1,
    KillDistance    = 0.0,
    
    LaunchDistData =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      15600,  18800,  22600,  25000,  26600,  27700,  28600,  
        500,    0,      0,      10000,  17200,  20000,  23800,  26200,  27800,  28900,  29900,  
        700,    0,      0,      12000,  18800,  21200,  25000,  27400,  29000,  30200,  31300,  
        1000,   0,      0,      14000,  21000,  26800,  26800,  29200,  31000,  32000,  33200,  
        2000,   10800,  15800,  21200,  27600,  32800,  32800,  35600,  37400,  38600,  39800,  
        3000,   18400,  23400,  28600,  34000,  38800,  38800,  41800,  43600,  45000,  46200,  
        4000,   25500,  30000,  35500,  40000,  44500,  44500,  47500,  49500,  50500,  52000,  
        5000,   32000,  37500,  42000,  47000,  50500,  50500,  53500,  55500,  57000,  58500,  
        6000,   39000,  44000,  49000,  54000,  58500,  59000,  59000,  61500,  63000,  65000,  
        7000,   45500,  50500,  56000,  60500,  64500,  64500,  64500,  67000,  69000,  71000,  
        8000,   51750,  57000,  62250,  66750,  69750,  69750,  69750,  72750,  75000,  77250,  
        9000,   57000,  59250,  69000,  73500,  75000,  75000,  75000,  78750,  81000,  83250,  
        10000,  61500,  64500,  68250,  70500,  79500,  79500,  81000,  82500,  87000,  90000,  
        11000,  72750,  77250,  81000,  84750,  86250,  87750,  87750,  89250,  92250,  95250,  
        12000,  79000,  83000,  87000,  90000,  91000,  93000,  94000,  95000,  97000,  100000, 
        13000,  86000,  90000,  93000,  96000,  97000,  99000,  99000,  100000, 100000, 105000, 
        14000,  91000,  95000,  99000,  102000, 103000, 105000, 105000, 106000, 106000, 108000, 
        15000,  97000,  101000, 105000, 107000, 109000, 111000, 111000, 112000, 112000, 113000, 
    },

    MinLaunchDistData =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      9000,   9300,   9500,   9700,   9800,   9900,   9900,   
        500,    0,      0,      8600,   9200,   9300,   9600,   9800,   9900,   10000,  10000,  
        700,    0,      0,      8800,   9300,   9400,   9700,   10000,  10300,  10800,  10800,  
        1000,   0,      0,      8800,   9400,   9800,   10400,  11600,  12000,  12000,  12400,  
        2000,   8600,   9000,   9400,   9800,   10200,  10200,  12400,  12800,  13400,  15000,  
        3000,   9200,   9600,   9800,   10200,  10600,  10600,  13600,  14000,  14000,  14000,  
        4000,   10000,  10000,  10500,  11000,  11000,  11000,  11500,  13000,  11500,  12000,  
        5000,   10500,  10500,  11000,  11500,  11500,  11500,  12000,  12000,  12000,  12000,  
        6000,   11000,  11000,  12000,  12000,  12000,  12000,  12000,  12500,  12500,  12500,  
        7000,   12000,  13500,  14000,  13500,  12500,  12500,  12500,  13500,  13000,  13000,  
        8000,   14250,  15000,  15000,  15000,  12750,  12750,  12750,  15000,  15000,  14250,  
        9000,   15000,  15750,  15750,  15000,  14250,  13500,  13500,  17250,  18000,  15750,  
        10000,  15000,  15000,  15750,  15000,  14250,  13500,  18000,  18750,  19500,  18750,  
        11000,  15750,  16500,  15750,  15000,  15000,  18000,  19500,  20250,  21750,  21000,  
        12000,  16000,  16000,  16000,  16000,  15000,  20000,  21000,  22000,  23000,  23000,  
        13000,  17000,  17000,  16000,  20000,  21000,  22000,  23000,  24000,  24000,  25000,  
        14000,  17000,  17000,  21000,  22000,  23000,  25000,  25000,  26000,  26000,  27000,  
        15000,  17000,  22000,  24000,  25000,  26000,  26000,  27000,  28000,  28000,  29000,  
    },

    MaxTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      105.2,  103.5,  113.3,  118.4,  121.5,  123.1,  123.6,  
        500,    0,      0,      71.7,   115.3,  109.8,  119.2,  124,    127,    128.5,  129.8,  
        700,    0,      0,      88.4,   124.8,  115.7,  124.9,  129.6,  132.7,  135,    137.2,  
        1000,   0,      0,      99.1,   136.3,  173.6,  133.8,  138.2,  142.9,  143,    145.9,  
        2000,   95.5,   120.8,  138.5,  166.6,  203.4,  159,    166.5,  170.6,  171.9,  173.8,  
        3000,   145,    167.8,  179.1,  195.9,  205.5,  187,    195.3,  198.8,  201.2,  202,    
        4000,   181.7,  201.3,  213.1,  219.8,  227.7,  212.5,  219.8,  224.3,  222.4,  224.7,  
        5000,   210.2,  243.1,  242,    252.2,  250.8,  239.3,  246.9,  250.4,  251.7,  252.7,  
        6000,   267.7,  273.9,  274.7,  283.1,  289.9,  273.5,  269.2,  275.9,  276,    279.7,  
        7000,   300.4,  313,    306.6,  308.5,  309.4,  292.3,  291.3,  296.9,  299.9,  301.9,  
        8000,   329.1,  342.5,  330.6,  330.1,  323.7,  307.7,  311.4,  320,    323.5,  325.7,  
        9000,   383,    424.3,  359,    356.2,  339.1,  325.4,  332.1,  345.5,  347.2,  347.4,  
        10000,  322.1,  319.4,  319.8,  314.2,  359.7,  350.1,  356.2,  356.3,  371.4,  375.4,  
        11000,  390.2,  395.9,  390.4,  392.5,  388.2,  390.4,  383.5,  386.8,  390.6,  392.3,  
        12000,  412.6,  412.8,  411.8,  410.3,  402.5,  408.4,  409.5,  411.7,  409.7,  408.9,  
        13000,  442.2,  442.9,  435.7,  435.6,  427.4,  432.8,  425.5,  427.4,  420.6,  433.8,  
        14000,  454.3,  457.6,  461.7,  462.2,  453.1,  457.8,  450.3,  452,    444.2,  447.6,  
        15000,  480.1,  484.6,  489.7,  481,    479.7,  483.6,  476.2,  477.6,  468.9,  467,    
    },

    MinTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      44.6,   36.8,   33.7,   31.7,   30.1,   29.9,   27.5,       
        500,    0,      0,      58.5,   44.2,   35.5,   32.7,   31.2,   29.8,   30,     28,     
        700,    0,      0,      55.7,   43.3,   35,     32.4,   31.9,   30.9,   31,     29.4,       
        1000,   0,      0,      51.7,   43.5,   38,     34.8,   36.6,   35.8,   34,     34.1,       
        2000,   69.6,   57.3,   47.9,   42.8,   38.2,   33.7,   38.5,   38,     38.2,   41.7,       
        3000,   63.8,   56.1,   48,     43.2,   39.6,   34.9,   42.2,   41.6,   39.9,   38.2,       
        4000,   64.2,   56.1,   50.2,   45,     40.4,   35.7,   36,     39.2,   34.1,   33.9,       
        5000,   63.1,   56.2,   50.9,   45.1,   40.8,   37.2,   37.1,   36.2,   35.4,   34.1,       
        6000,   63.6,   57.4,   54.3,   46.6,   42.8,   40.5,   38,     38.2,   37.6,   36.3,       
        7000,   70.4,   66.6,   60.9,   51.7,   45.2,   42.9,   40.5,   41.7,   39.5,   38.6,       
        8000,   79.5,   71.1,   64.2,   58.1,   47,     44.9,   42.6,   46.3,   45,     42.3,       
        9000,   80.7,   73,     66.9,   59,     52.2,   48.1,   46.2,   53.8,   52.9,   46.6,       
        10000,  74.9,   69.9,   67.2,   60.1,   52.7,   48.9,   58.8,   59,     57.1,   53.6,       
        11000,  75.8,   71.9,   64.5,   58.7,   56.3,   61.5,   63.8,   64,     63,     59.1,       
        12000,  77,     71,     66.3,   62.7,   57.5,   67.9,   68.7,   69.5,   69.6,   63.8,       
        13000,  80.7,   74.9,   67.7,   74.3,   73.9,   74.1,   74.8,   75.5,   73.1,   68.4,       
        14000,  81.5,   76,     82.1,   80.6,   80.1,   83,     80.7,   81.2,   78.6,   78,     
        15000,  82.5,   91,     91.4,   89.7,   89,     86.2,   86.4,   86.7,   83.9,   83.1,       
    },

    MidTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      71.9,   64.1,   64,     64,     63.6,   63.1,   62.2,       
        500,    0,      0,      64.9,   75.4,   65.8,   66.1,   66.1,   65.7,   65.2,   64.5,       
        700,    0,      0,      72,     78.4,   67.8,   68.3,   68.1,   68.4,   69.1,   68.4,       
        1000,   0,      0,      72.4,   81.9,   91.8,   72.4,   74.9,   75.8,   74.6,   75.1,       
        2000,   82.7,   85.6,   86.3,   92.4,   103.8,  82.2,   88.2,   88.9,   89.5,   92.6,       
        3000,   100.5,  103.4,  101.5,  103.6,  104.7,  93.8,   102,    102.4,  101.7,  100.6,  
        4000,   116,    116.7,  115.8,  114.5,  113.5,  104.4,  106.2,  109.7,  104.6,  104.5,  
        5000,   127.4,  132.8,  127.5,  127,    123.1,  115.7,  117.9,  117.2,  116.2,  115,    
        6000,   139.8,  145.1,  141.7,  138.9,  137.6,  132.5,  126.6,  128.7,  128.5,  128.4,  
        7000,   175.4,  163.7,  157.9,  151.5,  147.1,  141.6,  136.8,  139.7,  138.6,  138.1,  
        8000,   193.5,  246.8,  168.7,  162.6,  154.8,  149.8,  145.8,  152.3,  152.5,  150.4,  
        9000,   192,    273.7,  179.9,  172.4,  165.4,  158.9,  155.7,  166.9,  168.5,  162.3,  
        10000,  174.7,  169.8,  166.7,  159.7,  170.6,  164.9,  174.6,  174.8,  180.5,  179,    
        11000,  199,    196.9,  189.9,  186.2,  183.2,  188.6,  188.4,  189.3,  192.2,  190.2,  
        12000,  206.4,  202.6,  199,    195.9,  189.7,  200.1,  200.9,  201.9,  200.4,  199.3,  
        13000,  218.1,  215.2,  207.9,  213.7,  211.4,  213.1,  211.5,  212.3,  208.1,  208.7,  
        14000,  223.6,  221.5,  227.8,  227,    224.5,  227.9,  224,    224.5,  220.1,  219.2,  
        15000,  231.9,  241.2,  243.4,  240.3,  239.6,  238.4,  236.4,  236.6,  231.8,  230.2,  
    },
        
    shape_table_data =
    {
        {
            name     = gb6_name_sfw,
            file     = gb6_model,
            life     = 1,
            fire     = {0, 1},
            username = gb6_name_sfw,
            index    = WSTYPE_PLACEHOLDER,
        },
    },
    
    warhead = simple_warhead(0),

    fm = {
        mass                = gb6_mass,
        caliber             = 0.3,
        cx_coeff            = {1, 0.85, 0.8, 0.15, 1.5},
        L                   = 4.5,
        I                   = 1 / 12 * gb6_mass * 4.5 * 4.5,
        Ma                  = 2,
        Mw                  = 7,
        wind_sigma          = 0.0,
        wind_time           = 0.0,
        Sw                  = 1.2,
        dCydA               = {0.07, 0.036},
        A                   = 0.15,
        maxAoa              = 0.4,
        finsTau             = 0.2,
        Ma_x                = 2,
        Ma_z                = 2,
        Mw_x                = 1.4,
        
        addDeplSw           = 0.6,
        no_wings_A_mlt      = 2,
        wingsDeplProcTime   = 5,
        wingsDeplDelay      = 9999,
        no_wings_cx_coeff   = {1, 0.5, 0.8, 0.10, 1.6},
        
        release_rnd         = 0.3,
        release_rnd_x       = 0.0,
    },
    
    seeker = {
        coalition                       = 2,
        coalition_rnd_coeff             = 5.0,
        can_update_target_pos           = 1,
        target_point_always_on_surface  = 0,
    },
    
    control_block = {
        seeker_activation_dist       = 7000, -- 到达航路点前xx米 激活传感器(?)
        default_cruise_height        = -1,
        obj_sensor                   = 0, -- 载具传感器不抓目标
        can_update_target_pos        = 0,
        turn_before_point_reach      = 1, -- 到达航路点前转弯
        turn_hor_N                   = 2.2,
        turn_max_calc_angle_deg      = 90,
        turn_point_trigger_dist      = 100,
    },
    
    control_block2 = {
        delay                            = 0.5,
        add_y                            = 180, -- 爬高180米, 准备攻击
        wind_k                           = 1.0,
        use_snake_maneuver               = 0, -- 末段蛇形机动
        max_no_vert_offset_open_h        = 90,
        vert_offset_before_end_game_k    = 0.8,
        can_update_target_pos            = 0,
    },

    -- 释放子弹药的动作
    open_trigger = {
        delay                           = 0.1,
        trigger_add_time                = 1,
        bomblet_char_time               = 23.9,
        chute_bomblet_char_time         = 70.1,
        chute_open_time                 = 0.0,
        chute_cut_time                  = 400,
        char_time_vel_correction_coeff  = -0.0132,
        char_time_h_correction_coeff    = 0.0,
        default_add_y                   = 500,
        out_w_add_y                     = 0,
        wind_correction_coeff           = 1,
        time_coeff_data                 = { 25,     0.9,
                                            18,     0.86,
                                            15,     0.8,
                                            11.7,   0.58,
                                            6.8,    0.3,
                                            3,      0.2 },
    },
    
    autopilot = {
        delay                       = 0.5,
        K                           = 200,
        Ki                          = 0.00005,
        Kg                          = 6,
        nw_K                        = 32,
        nw_Ki                       = 0.00012,
        nw_Kg                       = 1.8,
        finsLimit                   = 0.8,
        useJumpByDefault            = 0,
        J_Power_K                   = 4.8,
        J_Diff_K                    = 3.2,
        J_Int_K                     = 0.0,
        J_Angle_W                   = 0.1,
        hKp_err                     = 50,
        Kx                          = 0.014,
        Kxd                         = 0.0,
        K_err_mlt                   = 5.0,
        K_roll_diff_mlt             = 5.0,
        roll_limit                  = 1.3,
        w_limit                     = 1.3,
        fins_limit_x                = 0.25,
        egm_Angle_K                 = 0.25,
        egm_FinAngle_K              = 0.32,
        egm_add_power_K             = 0.2,
        wings_depl_fins_limit_K     = 0.3,
        err_new_wlos_k              = 1.0,
        err_aoaz_k                  = 0,
        err_aoaz_sign_k             = 0.0,

        alternative_roll_params     = 1,
        w_x_limit                   = 1,
        err_limit                   = 0.5,
        err_min                     = 0.04,
        corr_err_min                = 0.006,
        roll_limit                  = 1.3,
        fins_limit_x                = 0.01,
        K_err_mlt                   = 4.0,
        K_roll_diff_mlt             = 4.0,
        Kx                          = 0.04,
        
        alternative_jump_params     = 1,
        K_pitch_diff_mlt            = 5.0,
        w_limit                     = 0.5,
        Kpj                         = 0.5,
    },
    
    launcher =
    {
        cluster = cluster_desc("Bomb_Other", wsType_Bomb_Cluster,
        {
            scheme = 
            {
                dispenser = 
                {
                    op_time                 = 9000,
                    wind_sigma              = 20,
                    impulse_sigma           = 1,
                    moment_sigma            = 1,
                    mass                    = 450,
                    caliber                 = 0.45,
                    L                       = 2.5,
                    I                       = 100,
                    Ma                      = 0.228,
                    Mw                      = 2.33,
                    cx_coeff                = {1, 1, 1, 1, 2},
                    model_name              = gb6_mbody,
                    set_start_args          = {0,12,13},
                    spawn_args_change       = {{1,12,0},{1,1,0.6}},
                    spawn_time              = {0.02, 0.17, 0.32}, -- BLU_108(带4个子弹药)的释放延迟, 要拉成一条线，可以适当放大，但不能太大，最好不要超过2.0
                    spawn_weight_loss       = {0, 150, 150},
                    spawn_args_change       = {{1,1,1},{1,12,0},{2,2,1}},
                    op_spawns               = 3,
                },

                --释放完BLU_108后的外壳(自由落体)
                empty_dispenser = 
                {
                    op_time                 = 50,
                    wind_sigma              = 5,
                    impulse_sigma           = 1,
                    moment_sigma            = 1,
                    mass                    = 45,
                    caliber                 = 0.45,
                    L                       = 2.5,
                    I                       = 2,
                    Ma                      = 0.03,
                    Mw                      = 0.3,
                    cx_coeff                = {1, 1, 1, 1, 2},
                    model_name              = gb6_mcap,
                    set_start_args          = {0, 1, 2},
                    spawn_options           = {{2, 2, 1}},
                },

                -- BLU_108(未释放战斗部)
                BLU_108 =
                {
                    op_time                 = 9000,
                    count                   = 12, -- BLU_108数量
                    effect_count            = 12,
                    wind_sigma              = 5,
                    impulse_sigma           = 1,
                    moment_sigma            = 2,
                    mass                    = 29.5,
                    caliber                 = 0.133,
                    L                       = 0.7,
                    I                       = 0.4,
                    Ma                      = 0.90985,
                    Mw                      = 1.67549,
                    cx_coeff                = {1, 0.39, 0.38, 0.236, 1.31},
                    model_name              = "cbu97_blu108",
                    set_start_args          = {13},
                    connectors_model_name   = "cbu97_shaft",
                    explosion_impulse_coeff = 42,
                    explosion_center        = {{0.36,0,0},{-0.44,0,0}},
                    release_rnd_coeff       = 7,
                    chute_open_time         = 1.16, -- 可以试试让BLU_108晚点开伞
                    chute_diam              = 2,
                    chute_Cx                = 1.2,
                    chute_rnd_coeff         = 0.5,
                    spawn_options           = {{0,1,6},{0,2,6}},
        
                    submunition_engine_impulse          = 60,
                    submunition_engine_fuel_mass        = 0.1,
                    submunition_engine_work_time        = 0.22,
                    submunition_engine_rotation_moment  = 9,
                    submunition_engine_start_height     = 48,   -- BLU-108开始自转的高度, 越高释放, 覆盖范围越大 
                    skeets_release_delay                = 1.00, -- BLU_108自转后开始释放战斗部的延迟
                    skeets_in_seq_release_delay         = 0.02, -- 每个战斗部释放间隔 (?) 
                    main_chute_open_speed               = 4,
                    extr_chute_max_diam                 = 0.3,
                    opening_speed_k                     = 2,
                    jump_error_sum                      = 440,
                },

                -- 释放完战斗部的BLU_108壳子
                BLU_108_panel =
                {
                    op_time                 = 50,
                    wind_sigma              = 5,
                    impulse_sigma           = 1,
                    moment_sigma            = 1,
                    mass                    = 5,
                    caliber                 = 0.1,
                    L                       = 1,
                    I                       = 1,
                    Ma                      = 0.5,
                    Mw                      = 1,
                    cx_coeff                = {1, 0.4, 0.4, 0.4, 1.4},
                    model_name              = "cbu97_blu108_panel",
                    init_pos                = {{0,0,0}},
                    init_impulse            = {{0,125,0}},
                    spawn_options           = {{0,1,1}},
                },

                -- 战斗部
                skeet = 
                {
                    op_time                 = 9000,
                    count                   = 4, -- 战斗部数量
                    effect_count            = 4,
                    wind_sigma              = 1,
                    impulse_sigma           = 1,
                    moment_sigma            = 0.1,
                    mass                    = 5,
                    caliber                 = 0.1,
                    L                       = 1,
                    I                       = 1,
                    Ma                      = 1,
                    Mw                      = 1,
                    cx_coeff                = {1, 0.4, 0.4, 0.4, 1.4},
                    model_name              = "cbu97_skeet",
                    init_pos                = {{0.02,-0.15,0},{0.02,0.15,0},{0.25,-0.15,0},{0.25,0.15,0}},
                    omega_impulse_coeff     = 3.6,
                    release_rnd_coeff       = 12,
                    set_start_args          = 10,
                    spawn_options           = {{2,2,1},{3,3,1},{4,4,1},{5,5,1}},
        
                    shell_model_name        = "shell",
                    seeker_local_point      = {{0.05, -0.07, 0}},
                    seeker_rotation_point   = {0, 0, 0},
                    seeker_max_angle        = 0.785, -- 战斗部搜索角度范围: 45度
                    seeker_max_range        = 160,  -- 战斗部最大搜索距离: 160米
                    seeker_activation_time  = 0.1,
                    shot_error              = 0.05, -- 战斗部误差
                    aim_lock_efficiency     = 0.85, -- 战斗部抓住目标几率
                    shell_speed             = 750,  -- m/s
                },
                warhead = predefined_warhead("CBU97"),
            },
            
            name            = _("MM-06"),
            type_name       = _("cluster"),
            cluster_scheme  = "AGM-154B_cluster",
        }
        )
    },
}

if not use_ed_wpn then
    declare_weapon(GB6_TSP)
end

declare_loadout({
    category        = CAT_BOMBS,
    CLSID           = 'DIS_GB6_TSP',
    --attribute       = GB6_TSP.wsTypeOfWeapon,
    attribute       = clsid_gb6_sfw(use_ed_wpn),
    Count           = 1,
    Cx_pil          = 0.0024,
    Picture         = "gb6.png",
    displayName     = _(gb6_name_sfw),
    Weight          = GB6_TSP.mass + pylon_mass,
    Elements        = {{ShapeName = gb6_model}},
    ejectVelocity   = eject_speed_msl,
    ejectDirection  = {0, -1, 0},
})


-- GB6_HE
GB6_HE =
{
    category        = CAT_MISSILES,
    name            = gb6_name_he,
    user_name       = _(gb6_name_he),
    scheme          = "JSOW_C",
    class_name      = "wAmmunitionCruise",
    model           = gb6_model,
    mass            = gb6_mass,
    
    wsTypeOfWeapon  = {wsType_Weapon,wsType_Missile,wsType_AS_Missile,WSTYPE_PLACEHOLDER},

    Escort          = 0,
    Head_Type       = 5,
    sigma           = {20, 20, 20},
    M               = gb6_mass,
    H_max           = 28000.0,
    H_min           = 100,
    Diam            = 330.0,
    Cx_pil          = 10,
    D_max           = 126000.0,
    D_min           = 10000.0,
    Head_Form       = 1,
    Life_Time       = 9999,
    Nr_max          = 10,
    v_min           = 10.0,
    v_mid           = 200.0,
    Mach_max        = 1.7,
    t_b             = 0.0,
    t_acc           = 0.0,
    t_marsh         = 0.0,
    Range_max       = 140000.0,
    H_min_t         = 0.0,
    Fi_start        = 3.14152,
    Fi_rak          = 3.14152,
    Fi_excort       = 3.14152,
    Fi_search       = 99.9,
    OmViz_max       = 99.9,
    X_back          = 0.0,
    Y_back          = 0.0,
    Z_back          = 0.0,
    Reflection      = 0.1,
    KillDistance    = 0.0,
    
    LaunchDistData =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      15600,  18800,  22600,  25000,  26600,  27700,  28600,  
        500,    0,      0,      10000,  17200,  20000,  23800,  26200,  27800,  28900,  29900,  
        700,    0,      0,      12000,  18800,  21200,  25000,  27400,  29000,  30200,  31300,  
        1000,   0,      0,      14000,  21000,  26800,  26800,  29200,  31000,  32000,  33200,  
        2000,   10800,  15800,  21200,  27600,  32800,  32800,  35600,  37400,  38600,  39800,  
        3000,   18400,  23400,  28600,  34000,  38800,  38800,  41800,  43600,  45000,  46200,  
        4000,   25500,  30000,  35500,  40000,  44500,  44500,  47500,  49500,  50500,  52000,  
        5000,   32000,  37500,  42000,  47000,  50500,  50500,  53500,  55500,  57000,  58500,  
        6000,   39000,  44000,  49000,  54000,  58500,  59000,  59000,  61500,  63000,  65000,  
        7000,   45500,  50500,  56000,  60500,  64500,  64500,  64500,  67000,  69000,  71000,  
        8000,   51750,  57000,  62250,  66750,  69750,  69750,  69750,  72750,  75000,  77250,  
        9000,   57000,  59250,  69000,  73500,  75000,  75000,  75000,  78750,  81000,  83250,  
        10000,  61500,  64500,  68250,  70500,  79500,  79500,  81000,  82500,  87000,  90000,  
        11000,  72750,  77250,  81000,  84750,  86250,  87750,  87750,  89250,  92250,  95250,  
        12000,  79000,  83000,  87000,  90000,  91000,  93000,  94000,  95000,  97000,  100000, 
        13000,  86000,  90000,  93000,  96000,  97000,  99000,  99000,  100000, 100000, 105000, 
        14000,  91000,  95000,  99000,  102000, 103000, 105000, 105000, 106000, 106000, 108000, 
        15000,  97000,  101000, 105000, 107000, 109000, 111000, 111000, 112000, 112000, 113000, 
    },

    MinLaunchDistData =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      9000,   9300,   9500,   9700,   9800,   9900,   9900,   
        500,    0,      0,      8600,   9200,   9300,   9600,   9800,   9900,   10000,  10000,  
        700,    0,      0,      8800,   9300,   9400,   9700,   10000,  10300,  10800,  10800,  
        1000,   0,      0,      8800,   9400,   9800,   10400,  11600,  12000,  12000,  12400,  
        2000,   8600,   9000,   9400,   9800,   10200,  10200,  12400,  12800,  13400,  15000,  
        3000,   9200,   9600,   9800,   10200,  10600,  10600,  13600,  14000,  14000,  14000,  
        4000,   10000,  10000,  10500,  11000,  11000,  11000,  11500,  13000,  11500,  12000,  
        5000,   10500,  10500,  11000,  11500,  11500,  11500,  12000,  12000,  12000,  12000,  
        6000,   11000,  11000,  12000,  12000,  12000,  12000,  12000,  12500,  12500,  12500,  
        7000,   12000,  13500,  14000,  13500,  12500,  12500,  12500,  13500,  13000,  13000,  
        8000,   14250,  15000,  15000,  15000,  12750,  12750,  12750,  15000,  15000,  14250,  
        9000,   15000,  15750,  15750,  15000,  14250,  13500,  13500,  17250,  18000,  15750,  
        10000,  15000,  15000,  15750,  15000,  14250,  13500,  18000,  18750,  19500,  18750,  
        11000,  15750,  16500,  15750,  15000,  15000,  18000,  19500,  20250,  21750,  21000,  
        12000,  16000,  16000,  16000,  16000,  15000,  20000,  21000,  22000,  23000,  23000,  
        13000,  17000,  17000,  16000,  20000,  21000,  22000,  23000,  24000,  24000,  25000,  
        14000,  17000,  17000,  21000,  22000,  23000,  25000,  25000,  26000,  26000,  27000,  
        15000,  17000,  22000,  24000,  25000,  26000,  26000,  27000,  28000,  28000,  29000,  
    },

    MaxTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      105.2,  103.5,  113.3,  118.4,  121.5,  123.1,  123.6,  
        500,    0,      0,      71.7,   115.3,  109.8,  119.2,  124,    127,    128.5,  129.8,  
        700,    0,      0,      88.4,   124.8,  115.7,  124.9,  129.6,  132.7,  135,    137.2,  
        1000,   0,      0,      99.1,   136.3,  173.6,  133.8,  138.2,  142.9,  143,    145.9,  
        2000,   95.5,   120.8,  138.5,  166.6,  203.4,  159,    166.5,  170.6,  171.9,  173.8,  
        3000,   145,    167.8,  179.1,  195.9,  205.5,  187,    195.3,  198.8,  201.2,  202,    
        4000,   181.7,  201.3,  213.1,  219.8,  227.7,  212.5,  219.8,  224.3,  222.4,  224.7,  
        5000,   210.2,  243.1,  242,    252.2,  250.8,  239.3,  246.9,  250.4,  251.7,  252.7,  
        6000,   267.7,  273.9,  274.7,  283.1,  289.9,  273.5,  269.2,  275.9,  276,    279.7,  
        7000,   300.4,  313,    306.6,  308.5,  309.4,  292.3,  291.3,  296.9,  299.9,  301.9,  
        8000,   329.1,  342.5,  330.6,  330.1,  323.7,  307.7,  311.4,  320,    323.5,  325.7,  
        9000,   383,    424.3,  359,    356.2,  339.1,  325.4,  332.1,  345.5,  347.2,  347.4,  
        10000,  322.1,  319.4,  319.8,  314.2,  359.7,  350.1,  356.2,  356.3,  371.4,  375.4,  
        11000,  390.2,  395.9,  390.4,  392.5,  388.2,  390.4,  383.5,  386.8,  390.6,  392.3,  
        12000,  412.6,  412.8,  411.8,  410.3,  402.5,  408.4,  409.5,  411.7,  409.7,  408.9,  
        13000,  442.2,  442.9,  435.7,  435.6,  427.4,  432.8,  425.5,  427.4,  420.6,  433.8,  
        14000,  454.3,  457.6,  461.7,  462.2,  453.1,  457.8,  450.3,  452,    444.2,  447.6,  
        15000,  480.1,  484.6,  489.7,  481,    479.7,  483.6,  476.2,  477.6,  468.9,  467,    
    },

    MinTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      44.6,   36.8,   33.7,   31.7,   30.1,   29.9,   27.5,       
        500,    0,      0,      58.5,   44.2,   35.5,   32.7,   31.2,   29.8,   30,     28,     
        700,    0,      0,      55.7,   43.3,   35,     32.4,   31.9,   30.9,   31,     29.4,       
        1000,   0,      0,      51.7,   43.5,   38,     34.8,   36.6,   35.8,   34,     34.1,       
        2000,   69.6,   57.3,   47.9,   42.8,   38.2,   33.7,   38.5,   38,     38.2,   41.7,       
        3000,   63.8,   56.1,   48,     43.2,   39.6,   34.9,   42.2,   41.6,   39.9,   38.2,       
        4000,   64.2,   56.1,   50.2,   45,     40.4,   35.7,   36,     39.2,   34.1,   33.9,       
        5000,   63.1,   56.2,   50.9,   45.1,   40.8,   37.2,   37.1,   36.2,   35.4,   34.1,       
        6000,   63.6,   57.4,   54.3,   46.6,   42.8,   40.5,   38,     38.2,   37.6,   36.3,       
        7000,   70.4,   66.6,   60.9,   51.7,   45.2,   42.9,   40.5,   41.7,   39.5,   38.6,       
        8000,   79.5,   71.1,   64.2,   58.1,   47,     44.9,   42.6,   46.3,   45,     42.3,       
        9000,   80.7,   73,     66.9,   59,     52.2,   48.1,   46.2,   53.8,   52.9,   46.6,       
        10000,  74.9,   69.9,   67.2,   60.1,   52.7,   48.9,   58.8,   59,     57.1,   53.6,       
        11000,  75.8,   71.9,   64.5,   58.7,   56.3,   61.5,   63.8,   64,     63,     59.1,       
        12000,  77,     71,     66.3,   62.7,   57.5,   67.9,   68.7,   69.5,   69.6,   63.8,       
        13000,  80.7,   74.9,   67.7,   74.3,   73.9,   74.1,   74.8,   75.5,   73.1,   68.4,       
        14000,  81.5,   76,     82.1,   80.6,   80.1,   83,     80.7,   81.2,   78.6,   78,     
        15000,  82.5,   91,     91.4,   89.7,   89,     86.2,   86.4,   86.7,   83.9,   83.1,       
    },

    MidTOF =
    {
        18,     10,

                100,    150,    200,    250,    300,    350,    400,    450,    500,    550,        
        300,    0,      0,      0,      71.9,   64.1,   64,     64,     63.6,   63.1,   62.2,       
        500,    0,      0,      64.9,   75.4,   65.8,   66.1,   66.1,   65.7,   65.2,   64.5,       
        700,    0,      0,      72,     78.4,   67.8,   68.3,   68.1,   68.4,   69.1,   68.4,       
        1000,   0,      0,      72.4,   81.9,   91.8,   72.4,   74.9,   75.8,   74.6,   75.1,       
        2000,   82.7,   85.6,   86.3,   92.4,   103.8,  82.2,   88.2,   88.9,   89.5,   92.6,       
        3000,   100.5,  103.4,  101.5,  103.6,  104.7,  93.8,   102,    102.4,  101.7,  100.6,  
        4000,   116,    116.7,  115.8,  114.5,  113.5,  104.4,  106.2,  109.7,  104.6,  104.5,  
        5000,   127.4,  132.8,  127.5,  127,    123.1,  115.7,  117.9,  117.2,  116.2,  115,    
        6000,   139.8,  145.1,  141.7,  138.9,  137.6,  132.5,  126.6,  128.7,  128.5,  128.4,  
        7000,   175.4,  163.7,  157.9,  151.5,  147.1,  141.6,  136.8,  139.7,  138.6,  138.1,  
        8000,   193.5,  246.8,  168.7,  162.6,  154.8,  149.8,  145.8,  152.3,  152.5,  150.4,  
        9000,   192,    273.7,  179.9,  172.4,  165.4,  158.9,  155.7,  166.9,  168.5,  162.3,  
        10000,  174.7,  169.8,  166.7,  159.7,  170.6,  164.9,  174.6,  174.8,  180.5,  179,    
        11000,  199,    196.9,  189.9,  186.2,  183.2,  188.6,  188.4,  189.3,  192.2,  190.2,  
        12000,  206.4,  202.6,  199,    195.9,  189.7,  200.1,  200.9,  201.9,  200.4,  199.3,  
        13000,  218.1,  215.2,  207.9,  213.7,  211.4,  213.1,  211.5,  212.3,  208.1,  208.7,  
        14000,  223.6,  221.5,  227.8,  227,    224.5,  227.9,  224,    224.5,  220.1,  219.2,  
        15000,  231.9,  241.2,  243.4,  240.3,  239.6,  238.4,  236.4,  236.6,  231.8,  230.2,  
    },
        
    shape_table_data =
    {
        {
            name     = gb6_name_he,
            file     = gb6_model,
            life     = 1,
            fire     = {0, 1},
            username = gb6_name_he,
            index    = WSTYPE_PLACEHOLDER,
        },
    },
    
    fm = {
        mass                = gb6_mass,
        caliber             = 0.3,  
        cx_coeff            = {1, 0.85, 0.8, 0.15, 1.5},
        L                   = 4.5,
        I                   = 1 / 12 * gb6_mass * 4.5 * 4.5,
        Ma                  = 2,
        Mw                  = 7,
        wind_sigma          = 0.0,
        wind_time           = 0.0,
        Sw                  = 1.2,
        dCydA               = {0.07, 0.036},
        A                   = 0.15,
        maxAoa              = 0.4,
        finsTau             = 0.2,
        Ma_x                = 2,
        Ma_z                = 2,
        Mw_x                = 1.4,
        
        addDeplSw           = 0.6,
        no_wings_A_mlt      = 2,
        wingsDeplProcTime   = 5,
        wingsDeplDelay      = 9999,
        no_wings_cx_coeff   = {1, 0.5, 0.8, 0.10, 1.6},

        release_rnd         = 0.3,
        release_rnd_x       = 0.0,
    },
    
    seeker = {
        coalition                    = 2,
        coalition_rnd_coeff          = 5.0,
        can_update_target_pos        = 1,
    },
    
    control_block = {
        seeker_activation_dist       = 7000,
        default_cruise_height        = -1,
        obj_sensor                   = 0,
        can_update_target_pos        = 0,
        turn_before_point_reach      = 1,
        turn_hor_N                   = 2.2,
        turn_max_calc_angle_deg      = 90,
        turn_point_trigger_dist      = 100,
    },
    
    autopilot = {
        delay                       = 0.5,
        K                           = 160,
        Ki                          = 0.00005,
        Kg                          = 6,
        nw_K                        = 32,
        nw_Ki                       = 0.00005,
        nw_Kg                       = 1.8,
        finsLimit                   = 0.8,
        useJumpByDefault            = 0,
        J_Power_K                   = 4.8,
        J_Diff_K                    = 3.2,
        J_Int_K                     = 0.0,
        J_Angle_W                   = 0.1,
        Kp_hor_err                  = 240,
        hKp_err                     = 50,
        Kx                          = 0.014,
        Kxd                         = 0.0,
        K_err_mlt                   = 5.0,
        K_roll_diff_mlt             = 5.0,
        roll_limit                  = 1.3,
        w_limit                     = 1.3,
        fins_limit_x                = 0.25,
        egm_Angle_K                 = 0.2,
        egm_FinAngle_K              = 0.3,
        egm_add_power_K             = 0.2,
        wings_depl_fins_limit_K     = 0.3,
        err_new_wlos_k              = 1.0,
        err_aoaz_k                  = 0,
        err_aoaz_sign_k             = 0.0,

        alternative_roll_params     = 1,
        w_x_limit                   = 1,
        err_limit                   = 0.5,
        err_min                     = 0.04,
        corr_err_min                = 0.006,
        roll_limit                  = 1.3,
        fins_limit_x                = 0.01,
        K_err_mlt                   = 4.0,
        K_roll_diff_mlt             = 4.0,
        Kx                          = 0.04,
        
        alternative_jump_params     = 1,
        K_pitch_diff_mlt            = 5.0,
        w_limit                     = 0.5,
        Kpj                         = 0.5,
    },
        
    warhead     = GB6HE_warhead,
    warhead_air = GB6HE_warhead,
}

if not use_ed_wpn then
    declare_weapon(GB6_HE)
end

declare_loadout({
    category        = CAT_BOMBS,
    CLSID           = 'DIS_GB6_HE',
    --attribute       = GB6_HE.wsTypeOfWeapon,
    attribute       = clsid_gb6_he(use_ed_wpn),
    Count           = 1,
    Cx_pil          = 0.0024,
    Picture         = "gb6.png",
    displayName     = _(gb6_name_he),
    Weight          = GB6_HE.mass + pylon_mass,
    Elements        = {{ShapeName = gb6_model}},
    ejectVelocity   = eject_speed_msl,
    ejectDirection  = {0, -1, 0},
})

