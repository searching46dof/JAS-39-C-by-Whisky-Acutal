

local jg500_name = 'JG-500'
local jg500_mass = 564.0
local pylon_mass = 0.0

local jg500_warhead =
{
    mass                 = 450.0,
    expl_mass            = 450.0,
    piercing_mass        = 0.0,
    other_factors        = { 0.5, 0.5, 1.0 },
    concrete_factors     = { 5.0, 1.0, 5.0 },
    concrete_obj_factor  = 10.0,
    obj_factors          = { 1.0, 1.0, 1.0 },
    cumulative_factor    = 0.0,
    cumulative_thickness = 0.0
}

JG500 = {
    category       = CAT_BOMBS,
    name           = jg500_name,
    user_name      = _(jg500_name),
    wsTypeOfWeapon = {4, 5, 36, WSTYPE_PLACEHOLDER},

    model          = "kab-500",
    scheme         = "bomb-paveway-II-afm",
    --class_name     = 'wAmmunition',
	class_name		= "wAmmunitionLaserHoming",

    shape_table_data = {
        {
            name     = jg500_name,
            file     = 'kab-500',
            life     = 1,
            fire     = { 0, 1},
            username = jg500_name,
            index    = WSTYPE_PLACEHOLDER,
        },
    },

    -- bomb data
    type        = 4,
    mass        = jg500_mass,
    hMin        = 1000.0,
    hMax        = 40000.0,
    Cx          = 0.00133,
    VyHold      = -60.0,
    Ag          = -1.0,
    warhead     = jg500_warhead,
   -- sounderName = 'Weapons/BetAB_500ShP',
		Reflection = 0.03,

    -- scheme data
    fm = {
		
			A = 0.36,
			I = 387.60416666667,
			L = 3.05,
			Ma = 0.53209076385094,
			Ma_x = 0.1,
			Mw = 4.1007009675697,
			Mw_x = 1,
			Sw = 2.2,
			caliber = 0.35,
			cx_coeff = { 1, 0.39, 0.6, 0.168, 1.31 },
			dCydA = { 0.022031224307594, 0.036 },
			finsTau = 0.1,
			mass = jg500_mass,
			maxAoa = 0.1221730476396,
			wind_sigma = 0,
			wind_time = 1000
    },

	bang_bang_autopilot = 
	{
		omegaDumpingK = 0.5
	},
		arming_delay = {
			delay_time = 0.8,
			enabled = true
		},
		arming_vane = {
			enabled = false,
			velK = 1
		},
	targeting_data = {
		char_time = 20.28
	},
	
	LaunchDistData = { 19, 8, 100, 150, 200, 250, 300, 350, 400, 450, 100, 0, 0, 3425, 8450, 13875, 17725, 19400, 22250, 200, 0, 0, 4050, 9100, 14400, 18150, 20550, 22800, 400, 0, 0, 4775, 10000, 15675, 19375, 21750, 23900, 700, 0, 0, 6025, 11225, 17075, 20850, 23150, 25325, 1000, 0, 0, 7250, 12800, 18450, 22200, 24500, 26650, 2000, 2500, 7400, 11550, 17200, 23050, 26550, 29050, 31350, 3000, 4700, 11700, 15600, 21800, 27800, 31300, 33800, 36200, 4000, 6000, 15800, 19500, 26200, 32400, 35900, 38700, 41100, 5000, 7100, 17200, 23600, 30300, 37000, 40400, 43400, 45800, 6000, 8100, 17500, 27900, 34200, 41300, 44900, 48000, 50600, 7000, 8750, 17500, 32250, 38000, 45500, 49250, 52500, 55250, 8000, 9500, 17750, 37000, 41500, 49000, 53500, 57000, 60000, 9000, 17500, 18000, 41750, 45500, 52250, 57500, 61250, 64500, 10000, 10750, 18250, 44750, 49750, 55250, 60750, 65250, 69250, 11000, 11000, 18000, 40500, 54000, 57000, 63500, 69000, 74000, 12000, 11500, 18500, 35500, 57500, 61000, 66500, 73000, 78000, 13000, 11000, 18000, 31000, 61000, 64000, 69000, 76000, 81000, 14000, 11000, 18000, 30000, 59000, 67000, 72000, 79000, 83000, 15000, 12000, 18000, 28000, 49000, 71000, 75000, 80000, 85000 },
	MinLaunchDistData = { 19, 8, 100, 150, 200, 250, 300, 350, 400, 450, 100, 0, 0, 1450, 650, 675, 1650, 1750, 2100, 200, 0, 0, 2150, 1050, 925, 1175, 1000, 1500, 400, 0, 0, 1800, 1825, 1825, 1825, 1825, 1825, 700, 0, 0, 2750, 3125, 3175, 3175, 3175, 3175, 1000, 0, 0, 3400, 4050, 4450, 4550, 4550, 4550, 2000, 2150, 3550, 4800, 6000, 6950, 7800, 8400, 8850, 3000, 2600, 4200, 5800, 7300, 8600, 9800, 10800, 11700, 4000, 2800, 4500, 6500, 8300, 9800, 11200, 12500, 13800, 5000, 3000, 5000, 7100, 9100, 10800, 12400, 13900, 15500, 6000, 3200, 5300, 7500, 9700, 11700, 13400, 15100, 17000, 7000, 3500, 5750, 7750, 10250, 12500, 14500, 16250, 18500, 8000, 3500, 6000, 8250, 10750, 13000, 15250, 17250, 19750, 9000, 3500, 6250, 8750, 11250, 13750, 16000, 18250, 20750, 10000, 3750, 6250, 9000, 11750, 14250, 16500, 19000, 22000, 11000, 4000, 6500, 9500, 12000, 15000, 17500, 20000, 23000, 12000, 4000, 7000, 9500, 12500, 15500, 18000, 21000, 24000, 13000, 4000, 7000, 10000, 13000, 16000, 19000, 22000, 25000, 14000, 4000, 7000, 10000, 13000, 16000, 19000, 23000, 26000, 15000, 4000, 7000, 11000, 14000, 17000, 20000, 24000, 27000 },


}
declare_weapon(JG500)



local JG500B_name = 'JG-500B'
local JG500B_mass = 564.0
local pylon_mass = 0.0

local JG500B_warhead =
{
    mass                 = 450.0,
    expl_mass            = 450.0,
    piercing_mass        = 0.0,
    other_factors        = { 0.5, 0.5, 1.0 },
    concrete_factors     = { 5.0, 1.0, 5.0 },
    concrete_obj_factor  = 10.0,
    obj_factors          = { 1.0, 1.0, 1.0 },
    cumulative_factor    = 0.0,
    cumulative_thickness = 0.0
}

JG500B = {
    category       = CAT_BOMBS,
    name           = JG500B_name,
    user_name      = _(JG500B_name),
    wsTypeOfWeapon = {4, 5, 36, WSTYPE_PLACEHOLDER},

    model          = "kab-500",
   -- scheme         = "bomb-paveway-III",
    scheme         = "bomb-paveway-III-afm",
    --class_name     = 'wAmmunition',
	class_name		= "wAmmunitionLaserHoming",

    shape_table_data = {
        {
            name     = JG500B_name,
            file     = 'kab-500',
            life     = 1,
            fire     = { 0, 1},
            username = JG500B_name,
            index    = WSTYPE_PLACEHOLDER,
        },
    },

    -- bomb data
    type        = 4,
    mass        = JG500B_mass,
    hMin        = 1000.0,
    hMax        = 40000.0,
    Cx          = 0.00133,
    VyHold      = -60.0,
    Ag          = -1.0,
	Reflection		= 0.03,
    warhead     = JG500B_warhead,
   -- sounderName = 'Weapons/BetAB_500ShP',

    -- scheme data
    fm = {
		
			A = 0.36,
			I = 387.60416666667,
			L = 3.05,
			Ma = 0.53209076385094,
			Ma_x = 0.1,
			Mw = 4.1007009675697,
			Mw_x = 1,
			Sw = 2.2,
			caliber = 0.35,
			cx_coeff = { 1, 0.39, 0.6, 0.168, 1.31 },
			dCydA = { 0.022031224307594, 0.036 },
			finsTau = 0.1,
			mass = JG500B_mass,
			maxAoa = 0.1221730476396,
			wind_sigma = 0,
			wind_time = 1000
    },
		autopilot = {
		--[[
			Kbias = 4,
			Kd = 2,
			Kdx = 0.2,
			Ki = 10,
			Kix = 0.8,
			Knav = 4,
			Kpitch = 2,
			Tf = 0.2,
			delay = 2,
			fins_limit = 0.34906585039887,
			fins_limit_x = 0.17453292519943,
			null_roll = 0.78539816339745,
			op_time = 100]]
		K					= 1.0,
		Kg					= 0.3,
		Ki					= 0.0,
		finsLimit			= 0.7,
			
		},
		--[[
		arming_delay = {
			delay_time = 0.8,
			enabled = true
		},
		arming_vane = {
			enabled = false,
			velK = 1
		},
		seeker = {
			FOV = 0.5235987755983,
			delay = 0
		},]]
	targeting_data = {
		char_time = 20.33
	},
	
	LaunchDistData = { 19, 8, 100, 150, 200, 250, 300, 350, 400, 450, 100, 0, 0, 3425, 8450, 13875, 17725, 19400, 22250, 200, 0, 0, 4050, 9100, 14400, 18150, 20550, 22800, 400, 0, 0, 4775, 10000, 15675, 19375, 21750, 23900, 700, 0, 0, 6025, 11225, 17075, 20850, 23150, 25325, 1000, 0, 0, 7250, 12800, 18450, 22200, 24500, 26650, 2000, 2500, 7400, 11550, 17200, 23050, 26550, 29050, 31350, 3000, 4700, 11700, 15600, 21800, 27800, 31300, 33800, 36200, 4000, 6000, 15800, 19500, 26200, 32400, 35900, 38700, 41100, 5000, 7100, 17200, 23600, 30300, 37000, 40400, 43400, 45800, 6000, 8100, 17500, 27900, 34200, 41300, 44900, 48000, 50600, 7000, 8750, 17500, 32250, 38000, 45500, 49250, 52500, 55250, 8000, 9500, 17750, 37000, 41500, 49000, 53500, 57000, 60000, 9000, 17500, 18000, 41750, 45500, 52250, 57500, 61250, 64500, 10000, 10750, 18250, 44750, 49750, 55250, 60750, 65250, 69250, 11000, 11000, 18000, 40500, 54000, 57000, 63500, 69000, 74000, 12000, 11500, 18500, 35500, 57500, 61000, 66500, 73000, 78000, 13000, 11000, 18000, 31000, 61000, 64000, 69000, 76000, 81000, 14000, 11000, 18000, 30000, 59000, 67000, 72000, 79000, 83000, 15000, 12000, 18000, 28000, 49000, 71000, 75000, 80000, 85000 },
	MinLaunchDistData = { 19, 8, 100, 150, 200, 250, 300, 350, 400, 450, 100, 0, 0, 1450, 650, 675, 1650, 1750, 2100, 200, 0, 0, 2150, 1050, 925, 1175, 1000, 1500, 400, 0, 0, 1800, 1825, 1825, 1825, 1825, 1825, 700, 0, 0, 2750, 3125, 3175, 3175, 3175, 3175, 1000, 0, 0, 3400, 4050, 4450, 4550, 4550, 4550, 2000, 2150, 3550, 4800, 6000, 6950, 7800, 8400, 8850, 3000, 2600, 4200, 5800, 7300, 8600, 9800, 10800, 11700, 4000, 2800, 4500, 6500, 8300, 9800, 11200, 12500, 13800, 5000, 3000, 5000, 7100, 9100, 10800, 12400, 13900, 15500, 6000, 3200, 5300, 7500, 9700, 11700, 13400, 15100, 17000, 7000, 3500, 5750, 7750, 10250, 12500, 14500, 16250, 18500, 8000, 3500, 6000, 8250, 10750, 13000, 15250, 17250, 19750, 9000, 3500, 6250, 8750, 11250, 13750, 16000, 18250, 20750, 10000, 3750, 6250, 9000, 11750, 14250, 16500, 19000, 22000, 11000, 4000, 6500, 9500, 12000, 15000, 17500, 20000, 23000, 12000, 4000, 7000, 9500, 12500, 15500, 18000, 21000, 24000, 13000, 4000, 7000, 10000, 13000, 16000, 19000, 22000, 25000, 14000, 4000, 7000, 10000, 13000, 16000, 19000, 23000, 26000, 15000, 4000, 7000, 11000, 14000, 17000, 20000, 24000, 27000 },


}
declare_weapon(JG500B)

--
declare_loadout({
    category         = CAT_BOMBS,
    CLSID            = 'DIS_GBU_10', -- DIS_JG500
    attribute        = JG500.wsTypeOfWeapon,
    Count            = 1,
    Cx_pil           = JG500.Cx,
    Picture          = "gbu16.png", -- TODO
    displayName      = _('JG-500 500 kg Laser-guided Bomb'),
    Weight           = jg500_mass + pylon_mass,
    Elements         = {
        {
            ShapeName = 'kab-500',
            DrawArgs  = { [1] = {1, 1.0}, }
        }
    }, -- TODO
    ejectImpulse     = 140,
    Required  = {"DIS_WMD7"},
})
declare_loadout({
    category         = CAT_BOMBS,
    CLSID            = 'DIS_GBU_16', -- DIS_JG500B
    attribute        = JG500B.wsTypeOfWeapon,
    Count            = 1,
    Cx_pil           = JG500B.Cx,
    Picture          = "gbu24.png", -- TODO
    displayName      = _('JG-500B 500 kg Laser-guided Bomb'),
    Weight           = JG500B_mass + pylon_mass,
    Elements         = {
        {
            ShapeName = 'kab-500',
            DrawArgs  = { [1] = {1, 1.0}, }
        }
    }, -- TODO
    ejectImpulse     = 140,
    Required  = {"DIS_WMD7"},
})


